# Feel and Grow Rich - Production Environment Variables
# üö® CRITICAL: Add these to Replit Secrets (do NOT commit actual values to git)

# ============================================================================
# CRITICAL - Supabase Configuration (Client-side)
# MUST be prefixed with VITE_ to be accessible in browser JavaScript
# Without these, OAuth will fail in production!
# ============================================================================
VITE_SUPABASE_URL=https://itdlyrprkjeiwvkxaieg.supabase.co
VITE_SUPABASE_ANON_KEY=your-supabase-anon-key-from-dashboard

# ============================================================================
# Supabase Configuration (Server-side)
# Used for backend authentication verification
# ============================================================================
SUPABASE_URL=https://itdlyrprkjeiwvkxaieg.supabase.co
SUPABASE_ANON_KEY=your-supabase-anon-key-from-dashboard

# ============================================================================
# REQUIRED - Database Configuration
# Production Neon PostgreSQL Database
# ============================================================================
DATABASE_URL=postgres://...@ep-muddy-breeze-ae8zt97c.c-2.us-east-2.aws.neon.tech/...

# ============================================================================
# REQUIRED - Session Secret (PRODUCTION)
# Generate with: openssl rand -base64 48
# DO NOT use the development secret in production!
# Still used for compatibility but Supabase handles auth sessions
# ============================================================================
SESSION_SECRET=KygDHJvDI1tstSqh36qwgJlQ2PKTIOEEsbnq2ob1mOuUkDPZjC/harbNhXwrf2z2

# ============================================================================
# REQUIRED - Application Configuration
# ============================================================================
APP_URL=https://miracleacademy.ai
NODE_ENV=production
PORT=5000

# ============================================================================
# OPTIONAL - GoHighLevel CRM Integration
# ============================================================================
# GHL_API_KEY=your-ghl-api-key
# GHL_LOCATION_ID=your-ghl-location-id

# ============================================================================
# DEPLOYMENT NOTES - READ BEFORE DEPLOYING
# ============================================================================
#
# üéØ CRITICAL SETUP STEPS:
#
# 1. Supabase Dashboard Configuration:
#    a. Go to: https://supabase.com/dashboard/project/itdlyrprkjeiwvkxaieg/auth/providers
#    b. Enable Google OAuth provider
#    c. Add your Google OAuth credentials (Client ID & Secret)
#
# 2. Supabase Redirect URLs:
#    a. Go to: https://supabase.com/dashboard/project/itdlyrprkjeiwvkxaieg/auth/url-configuration
#    b. Add these Redirect URLs:
#       - https://miracleacademy.ai/auth/callback
#       - https://mind-sculpt-sean6feel.replit.app/auth/callback
#       - https://18535e95-4e4b-4772-bf1c-82d06e2a0b83-00-1j25jiwk2djoe.picard.replit.dev/auth/callback
#    c. Set Site URL: https://miracleacademy.ai
#
# 3. Google Cloud Console:
#    a. Go to: https://console.cloud.google.com/apis/credentials
#    b. Edit your OAuth 2.0 Client ID
#    c. Add to Authorized redirect URIs:
#       - https://itdlyrprkjeiwvkxaieg.supabase.co/auth/v1/callback
#       - https://miracleacademy.ai/auth/callback
#    d. Save changes
#
# 4. Get Your Supabase Anon Key:
#    a. Go to: https://supabase.com/dashboard/project/itdlyrprkjeiwvkxaieg/settings/api
#    b. Copy the "anon public" key
#    c. Use it for both SUPABASE_ANON_KEY and VITE_SUPABASE_ANON_KEY above
#
# 5. Add ALL Variables to Replit Secrets:
#    - Replit ‚Üí Tools ‚Üí Secrets
#    - Add each variable above with actual values
#    - DO NOT skip the VITE_ prefixed variables!
#    - Replit will auto-restart when you save secrets
#
# ============================================================================
# WHAT YOU DON'T NEED (Removed from old Passport.js setup)
# ============================================================================
#
# ‚ùå GOOGLE_CLIENT_ID - Now configured in Supabase Dashboard
# ‚ùå GOOGLE_CLIENT_SECRET - Now configured in Supabase Dashboard
# ‚ùå GITHUB_CLIENT_ID - Now configured in Supabase Dashboard
# ‚ùå GITHUB_CLIENT_SECRET - Now configured in Supabase Dashboard
# ‚ùå REPLIT_DOMAINS - Not needed with Supabase Auth
#
# ============================================================================
# WHY VITE_ PREFIX IS CRITICAL
# ============================================================================
#
# Vite (the build tool) only exposes environment variables to browser code
# if they start with VITE_. Without this prefix:
# - Browser can't access the variables
# - Supabase client falls back to localhost defaults
# - OAuth completely fails in production
# - You'll see "Invalid session" or "No authorization header" errors
#
# Both versions are needed:
# - VITE_SUPABASE_URL ‚Üí For browser/client code
# - SUPABASE_URL ‚Üí For server/backend code
#
# ============================================================================
# TESTING CHECKLIST
# ============================================================================
#
# After deployment, verify:
# - [ ] App loads at https://miracleacademy.ai
# - [ ] Click "Continue with Google" shows OAuth popup
# - [ ] Google authentication completes successfully
# - [ ] Redirects to /auth/callback then home page
# - [ ] User is logged in (check profile/avatar)
# - [ ] Session persists after page refresh
# - [ ] Browser console shows no Supabase errors
# - [ ] Can use assessment tools and save data
#
# Test on all domains:
# - [ ] https://miracleacademy.ai (custom domain)
# - [ ] https://mind-sculpt-sean6feel.replit.app (production)
# - [ ] Dev domain (if needed)
#
# ============================================================================
# TROUBLESHOOTING
# ============================================================================
#
# "Invalid redirect URL":
# ‚Üí Add the URL to Supabase Dashboard ‚Üí Auth ‚Üí URL Configuration
#
# "Invalid session" or "No authorization header":
# ‚Üí Check VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY are set
# ‚Üí Verify anon key is correct
# ‚Üí Check browser console for Supabase connection errors
#
# "redirect_uri_mismatch" from Google:
# ‚Üí Add Supabase callback URL to Google Cloud Console
# ‚Üí URL: https://itdlyrprkjeiwvkxaieg.supabase.co/auth/v1/callback
#
# CORS or "Failed to fetch":
# ‚Üí Verify SUPABASE_URL is correct
# ‚Üí Check auth flow type is 'pkce' (already set in code)
# ‚Üí Verify site URL in Supabase Dashboard matches APP_URL
#
# ============================================================================
# DEPLOYMENT PLATFORMS
# ============================================================================
#
# ‚úÖ Replit (Current): Add to Secrets, auto-deploys
# ‚úÖ Vercel: Add to Environment Variables
# ‚úÖ Netlify: Add to Environment Variables
# ‚úÖ Cloudflare Pages: Add to Environment Variables
#
# ALL platforms: Don't forget the VITE_ prefixed variables!
#
# ============================================================================
# ADDITIONAL RESOURCES
# ============================================================================
#
# - Supabase Auth Docs: https://supabase.com/docs/guides/auth
# - OAuth Setup Guide: https://supabase.com/docs/guides/auth/social-login/auth-google
# - Vite Environment Variables: https://vitejs.dev/guide/env-and-mode.html
# - Repository: https://github.com/jhillbht/Feel-and-grow-rich
#
# ============================================================================